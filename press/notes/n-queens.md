---
date: 2023/2/26
title: å…«çš‡åé—®é¢˜
category: é—®ç­”
tags:
  - ç®—æ³•
---

ğŸ¤” å¦‚ä½•èƒ½å¤Ÿåœ¨ 8Ã—8 çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Šæ”¾ç½®å…«ä¸ªçš‡åï¼Œä½¿å¾—ä»»ä½•ä¸€ä¸ªçš‡åéƒ½æ— æ³•ç›´æ¥æ”»å‡»å…¶ä»–çš„çš‡åï¼Ÿ
å³è¦æ±‚ä»»ä¸¤ä¸ªçš‡åéƒ½ä¸èƒ½å¤„äºåŒä¸€æ¡æ¨ªè¡Œã€çºµè¡Œæˆ–å¯¹è§’çº¿ä¸Šã€‚

## é—®é¢˜è¯´æ˜

è¿™ä¸ªé—®é¢˜å¯ä»¥æ‰©å±•æˆä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š

1. æ‰¾åˆ°æ€»å…±æœ‰å¤šå°‘ç§æ‘†æ³•
2. æ‰¾åˆ°å…¶ä¸­ä¸€ç§å…·ä½“æ‘†æ³•
3. æ‰¾åˆ°æ‰€æœ‰å…·ä½“æ‘†æ³•

ç»è¿‡æˆ‘åœ¨ç½‘ä¸Šä¸€é¡¿æœç´¢ï¼Œå…¶ä¸­ï¼š

- é—®é¢˜ 1 æœ‰ä¸ªæ›´é€šç”¨çš„åè¯æè¿° â€”â€” "ç¦ä½æ’åˆ—"ï¼Œå¯ä»¥é€šè¿‡é€šé¡¹å…¬å¼ç›´æ¥æ±‚è§£
- é—®é¢˜ 2 ä¹Ÿæœ‰ç›¸åº”æ•°å­¦å…¬å¼ï¼Œä½¿ç”¨"æ„é€ æ³•"å¯åœ¨ O(1) çš„æ—¶é—´å¤æ‚åº¦å†…å¾—åˆ°è§£

ä¸è¿‡é—®é¢˜ 1ã€2 æ¶‰åŠåˆ°å¤§é‡æ•°å­¦æ¨å¯¼ï¼Œä¸€æ—¶åŠä¼šæŒºéš¾ææ‡‚ï¼Œæˆ‘è¿™é‡Œä¸»è¦ç›®çš„æ˜¯å°è¯•ç”¨è®¡ç®—æœºæ¥â€œæš´åŠ›â€æ±‚è§£é—®é¢˜ 3ã€‚

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å…ˆä½¿ç”¨å›æº¯ç®—æ³•æ±‚å¾—å…«çš‡åé—®é¢˜çš„æ‰€æœ‰å…·ä½“æ‘†æ³•ï¼Œç„¶åè®¾è®¡ä¸€ä¸ªå‰ç«¯ç»„ä»¶ï¼Œç”¨äºåŠ¨æ€å±•ç¤ºå¯¹åº”çš„æ‘†æ”¾æ–¹æ¡ˆã€‚è¿™ä¸ªç»„ä»¶ä¹Ÿå¯ä»¥æ¼”ç¤º N çš‡åçš„æ‘†æ”¾ï¼Œä¸è¿‡ç”±äºç®—æ³•ï¼Œç¡¬ä»¶ç­‰é™åˆ¶ï¼Œç›®å‰åªè®¡ç®—åˆ° "åäº”çš‡å"ï¼ˆåœ¨æˆ‘çš„ç¬”è®°æœ¬ä¸Šï¼Œç®—å‡ºç­”æ¡ˆéœ€è¦ 9 ç§’å·¦å³ï¼‰ã€‚

## æ‘†æ³•å±•ç¤º

> N è¡¨ç¤ºçš‡åæ•°é‡ï¼ˆ1 â‰¤ N â‰¤ 15ï¼‰

## ä»£ç ç¤ºä¾‹

<details class="note">
  <summary>ä½¿ç”¨å›æº¯ç®—æ³•çš„ä¸€ç§è§£æ³•ç¤ºä¾‹</summary>

```ts
function nQueens(n = 8) {
  const results: number[][] = []
  // è®°å½•è¡Œä¸­çš‡åçš„ä½ç½® rows[0] = 1 è¡¨ç¤ºç¬¬ 1 è¡Œçš„çš‡ååœ¨ç¬¬ 2 åˆ—
  const rows: number[] = Array(n)
  // è®°å½•åˆ—ä¸­æ˜¯å¦æœ‰çš‡å cols[0] = true è¡¨ç¤ºç¬¬ 1 åˆ—æœ‰çš‡å
  const cols: boolean[] = Array(n)
  // è®°å½•ä¸»å¯¹è§’çº¿æ˜¯å¦æœ‰çš‡åï¼ˆä¸æ°´å¹³è½´å¤¹è§’ä¸º 45Â°ï¼‰
  const deg1: boolean[] = Array(n)
  // è®°å½•å‰¯å¯¹è§’çº¿æ˜¯å¦æœ‰çš‡åï¼ˆä¸æ°´å¹³è½´å¤¹è§’ä¸º 135Â°ï¼‰
  const deg2: boolean[] = Array(n)

  // å›æº¯ é»˜è®¤ä»ç¬¬ 1 è¡Œå¼€å§‹
  backtrack()
  return results

  function backtrack(row = 0) {
    if (row === n) {
      // æ‰¾åˆ°ä¸€ç§è§£æ³•ï¼Œè®°å½•ä¹‹
      results.push(rows.slice())
      return
    }
    for (let col = 0; col < n; col++) {
      const d1 = row + col
      const d2 = row - col + n
      // å‰ªæ ä¸å…è®¸è¯¥æ ¼å­æ‰€åœ¨ (åˆ— æˆ– ä¸»å¯¹è§’çº¿ æˆ– å‰¯å¯¹è§’çº¿) åŒ…å«çš‡å
      if (cols[col] || deg1[d1] || deg2[d2]) {
        continue
      }
      rows[row] = col // è¯¥æ ¼å­[row, col]å¯ä»¥æ”¾ç½®çš‡å
      cols[col] = deg1[d1] = deg2[d2] = true // æ ‡è®°çŠ¶æ€
      backtrack(row + 1) // å°è¯•æ”¾ç½®ä¸‹ä¸€è¡Œçš„çš‡å
      cols[col] = deg1[d1] = deg2[d2] = false // å›æº¯ æ’¤é”€æ ‡è®°
    }
  }
}
```

</details>

## å‚è€ƒé“¾æ¥

- [Eight_queens_puzzle | wiki](https://en.wikipedia.org/wiki/Eight_queens_puzzle)
- [51. N çš‡å | åŠ›æ‰£](https://leetcode.cn/problems/n-queens/solution/)
- [N çš‡åé—®é¢˜ â€“ æ„é€ æ³•åŸç†ä¸è¯æ˜](https://exp-blog.com/algorithm/n-huang-hou-wen-ti/)
